<div class="scanner-container">
  <div class="scan-square"></div>
  <zxing-scanner
    [(device)]="currentCamera"
    (scanSuccess)="scanSuccessHandler($event)"
    (permissionResponse)="onHasPermission($event)"
    (hasDevices)="onHasDevices($event)"
    class="scan-video"
  >
  </zxing-scanner>
</div>

<select
  *ngIf="hasPermission === true"
  #list
  (change)="onCameraSelectChange(list.value)"
>
  <option value="" [selected]="!currentCamera">Camara desactivada</option>
  <option
    *ngFor="let camera of availableCameras"
    [value]="camera.deviceId"
    [selected]="currentCamera && camera.deviceId === currentCamera.deviceId"
  >
    {{ getCameraLabel(camera) }}
  </option>
</select>

<ng-container *ngIf="hasPermission === undefined">
  <h2>Solicitud de permisos</h2>
  <p>Se requiere acceso a la cámara para utilizar el escáner.</p>
  <p>Haz clic en "Aceptar" para permitir el acceso a la cámara.</p>
  <mat-spinner></mat-spinner>
</ng-container>
